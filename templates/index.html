<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>Chess Game</title>
    <script src="/static/chessboardjs-1.0.0/js/chessboard-1.0.0.min.js"></script>
    <link rel="stylesheet" href="/static/chessboardjs-1.0.0/css/chessboard-1.0.0.min.css">
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="shortcut icon" type="image/x-icon" href="/static/chessboardjs-1.0.0/img/chesspieces/wikipedia/bQ.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>

<h1 class="mt-5"> Our Chess Game</h1>

<div class="d-flex p-2 bd-highlight gap-2">
    <form action="/new_game" method="post">
        <button class="btn btn-secondary" name="start_new_game" type="submit">New Game</button>
    </form>
    <!-- TODO disable this button if no game can be loaded -->
    <form action="/load_game" method="post">
        <button class="btn btn-outline-primary" name="start_new_game" type="submit">Load Game</button>
    </form>
    <form action="/save_game" method="post">
        <button class="btn btn-outline-primary" name="start_new_game" type="submit">Save Game</button>
    </form>
</div>
<p class="fs-3 text">
    {% if color %}
    It's <strong>{{color}}'s</strong> turn
    {% endif %}
</p>


<div id="myBoard"></div>
<div class="d-flex p-2 bd-highlight gap-2">
    <form action="/undo" method="post">
        <button class="btn btn-outline-secondary" name="undo" type="submit"><i class="fas fa-undo"></i></button>
    </form>
    <form action="/show_history" method="post">
        <button class="btn btn-outline-secondary" name="show_history" type="submit"><i class="fas fa-play"></i></button>
    </form>
    <form action="/redo" method="post">
        <button class="btn btn-outline-secondary" name="redo" type="submit"><i class="fas fa-redo"></i></button>
    </form>
</div>
    <form action="/move" method="post" class="d-flex p-2 bd-highlight gap-2">
        <div class="form-floating">
            <input type="text" class="form-control" id="movingInput" placeholder="Your Move">
            <label for="movingInput">Your Move</label>
        </div>
        <button class="btn btn-primary" name="do_move" type="submit">Move</button>
    </form>



<button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseRules" aria-expanded="false" aria-controls="collapseRules">
    Show Input rules
</button>
<div class="collapse" id="collapseRules">
  <div class="card card-body">
        <h2> Input rules: </h2>
        <h3> The board</h3>
        <p>
            Lines: a-h <br>
            Rows: (1-8)
        </p>
        <h3>The pieces</h3>
        <p>
            <strong>Rook</strong>: R <br>
            <strong>Knight</strong>: K <br>
            <strong>Bishop</strong>: B <br>
            <strong>Queen</strong>: Q <br>
            <strong>King</strong>: K <br>
            <strong>Pawn</strong>: P
        </p>
        <h3> The move </h3>
        <p>
            The letters must be capitalized to indicate a piece; otherwise, they indicate a square.
            First you write the figure and its position down and then where you want to move it.
        </p>
        <h4>Special Moves</h4>
        <h5>Pawn promotion</h5>
        <p>
            You have to do the simple move and then use the letter of the piece you want.
            E.g.: Pa7 Pa8 Q
        </p>
        <h5>Castling</h5>
        <p>
            Castling is indicated by the special notations 0-0 (for kingside castling) and 0-0-0 (queenside castling). (using zero!)
        </p>
        <h4>Examples</h4>
        <p>
            <strong>Pe4 Pe5</strong>: move the pawn on e4 to e5<br>
            <strong>Nf3 Nc6</strong>: move the Knight on f3 to c6<br>
            <strong>Bf1 Bb5</strong>: move the Bishop on f1 to b5<br>
            <strong>Pa7 Pa8 Q</strong>: move to the top of the board and do a pawn promotion<br>
            <strong>0-0</strong>: do a kingside castling<br>
        </p>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="/static/chessboardjs-1.0.0/js/chessboard-1.0.0.min.js"></script>

<script>
    let pos = '{{ position }}';
    let board = Chessboard('myBoard', pos);
</script>
</body>
</html>
